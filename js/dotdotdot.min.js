"use strict";var Dotdotdot=function(){function t(e,i){void 0===i&&(i=t.options);var n=this;for(var o in this.container=e,this.options=i||{},this.watchTimeout=null,this.watchInterval=null,this.resizeEvent=null,t.options)t.options.hasOwnProperty(o)&&void 0===this.options[o]&&(this.options[o]=t.options[o]);var r=this.container.dotdotdot;r&&r.destroy(),this.API={},["truncate","restore","destroy","watch","unwatch"].forEach(function(t){n.API[t]=function(){return n[t].call(n)}}),this.container.dotdotdot=this.API,this.originalStyle=this.container.getAttribute("style")||"",this.originalContent=this._getOriginalContent(),this.ellipsis=document.createTextNode(this.options.ellipsis);var s=window.getComputedStyle(this.container);"break-word"!==s["word-wrap"]&&(this.container.style["word-wrap"]="break-word"),"pre"===s["white-space"]?this.container.style["white-space"]="pre-wrap":"nowrap"===s["white-space"]&&(this.container.style["white-space"]="normal"),null===this.options.height&&(this.options.height=this._getMaxHeight()),this.truncate(),this.options.watch&&this.watch()}return t.prototype.restore=function(){var t=this;this.unwatch(),this.container.setAttribute("style",this.originalStyle),this.container.classList.remove("ddd-truncated"),this.container.innerHTML="",this.originalContent.forEach(function(e){t.container.append(e)})},t.prototype.destroy=function(){this.restore(),this.container.dotdotdot=null},t.prototype.watch=function(){var t=this;this.unwatch();var e={width:null,height:null},i=function(i,n,o){if(t.container.offsetWidth||t.container.offsetHeight||t.container.getClientRects().length){var r={width:i[n],height:i[o]};return e.width==r.width&&e.height==r.height||t.truncate(),r}return e};"window"==this.options.watch?(this.resizeEvent=function(n){t.watchTimeout&&clearTimeout(t.watchTimeout),t.watchTimeout=setTimeout(function(){e=i(window,"innerWidth","innerHeight")},100)},window.addEventListener("resize",this.resizeEvent)):this.watchInterval=setInterval(function(){e=i(t.container,"clientWidth","clientHeight")},1e3)},t.prototype.unwatch=function(){this.resizeEvent&&(window.removeEventListener("resize",this.resizeEvent),this.resizeEvent=null),this.watchInterval&&clearInterval(this.watchInterval),this.watchTimeout&&clearTimeout(this.watchTimeout)},t.prototype.truncate=function(){var t=this,e=!1;return this.container.innerHTML="",this.originalContent.forEach(function(e){t.container.append(e.cloneNode(!0))}),this.maxHeight=this._getMaxHeight(),this._fits()||(e=!0,this._truncateToNode(this.container)),this.container.classList[e?"add":"remove"]("ddd-truncated"),this.options.callback.call(this.container,e),e},t.prototype._truncateToNode=function(e){var i=[],n=[];if(t.$.contents(e).forEach(function(t){if(1!=t.nodeType||!t.matches(".ddd-keep")){var e=document.createComment("");t.replaceWith(e),n.push(t),i.push(e)}}),n.length){for(var o=0;o<n.length;o++){i[o].replaceWith(n[o]);var r=this.ellipsis.cloneNode(!0);switch(n[o].nodeType){case 1:n[o].append(r);break;case 3:n[o].after(r)}var s=this._fits();if(r.parentElement.removeChild(r),!s){if("node"==this.options.truncate&&o>1)return void n[o-2].remove();break}}for(var a=o;a<i.length;a++)i[a].remove();var h=n[Math.max(0,Math.min(o,n.length-1))];if(1==h.nodeType){var c=document.createElement(h.nodeName);c.append(this.ellipsis),h.replaceWith(c),this._fits()?c.replaceWith(h):(c.remove(),h=n[Math.max(0,o-1)])}1==h.nodeType?this._truncateToNode(h):this._truncateToWord(h)}},t.prototype._truncateToWord=function(t){for(var e=t.textContent,i=-1!==e.indexOf(" ")?" ":"　",n=e.split(i),o=n.length;o>=0;o--)if(t.textContent=this._addEllipsis(n.slice(0,o).join(i)),this._fits()){"letter"==this.options.truncate&&(t.textContent=n.slice(0,o+1).join(i),this._truncateToLetter(t));break}},t.prototype._truncateToLetter=function(t){for(var e=t.textContent.split(""),i="",n=e.length;n>=0&&(!(i=e.slice(0,n).join("")).length||(t.textContent=this._addEllipsis(i),!this._fits()));n--);},t.prototype._fits=function(){return this.container.scrollHeight<=this.maxHeight+this.options.tolerance},t.prototype._addEllipsis=function(t){for(var e=[" ","　",",",";",".","!","?"];e.indexOf(t.slice(-1))>-1;)t=t.slice(0,-1);return t+this.ellipsis.textContent},t.prototype._getOriginalContent=function(){var e="script, style";this.options.keep&&(e+=", "+this.options.keep),t.$.find(e,this.container).forEach(function(t){t.classList.add("ddd-keep")}),[this.container].concat(t.$.find("*",this.container)).forEach(function(e){e.normalize(),t.$.contents(e).forEach(function(t){var i=!1;if(3==t.nodeType){if(""==t.textContent.trim()){var n=t.previousSibling,o=t.nextSibling;(t.parentElement.matches("table, thead, tbody, tfoot, tr, dl, ul, ol, video")||!n||n.matches("div, p, table, td, td, dt, dd, li")||!o||o.matches("div, p, table, td, td, dt, dd, li"))&&(i=!0)}}else 8==t.nodeType&&(i=!0);i&&e.removeChild(t)})});var i=[];return t.$.contents(this.container).forEach(function(t){i.push(t.cloneNode(!0))}),i},t.prototype._getMaxHeight=function(){if("number"==typeof this.options.height)return this.options.height;for(var t=window.getComputedStyle(this.container),e=["maxHeight","height"],i=0,n=0;n<e.length;n++)if("px"==(o=t[e[n]]).slice(-2)){i=parseFloat(o);break}switch(e=[],t.boxSizing){case"border-box":e.push("borderTopWidth"),e.push("borderBottomWidth");case"padding-box":e.push("paddingTop"),e.push("paddingBottom")}for(n=0;n<e.length;n++){var o;"px"==(o=t[e[n]]).slice(-2)&&(i-=parseFloat(o))}return Math.max(i,0)},t.version="4.0.9",t.options={ellipsis:"… ",callback:function(t){},truncate:"word",tolerance:0,keep:null,watch:"window",height:null},t.$={find:function(t,e){return e=e||document,Array.prototype.slice.call(e.querySelectorAll(t))},contents:function(t){return t=t||document,Array.prototype.slice.call(t.childNodes)}},t}();!function(t){void 0!==t&&(t.fn.dotdotdot=function(t){return this.each(function(e,i){var n=new Dotdotdot(i,t);i.dotdotdot=n.API})})}(window.Zepto||window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvdGRvdGRvdC5qcyJdLCJuYW1lcyI6WyJEb3Rkb3Rkb3QiLCJ0IiwiZSIsImkiLCJvcHRpb25zIiwibiIsInRoaXMiLCJvIiwiY29udGFpbmVyIiwid2F0Y2hUaW1lb3V0Iiwid2F0Y2hJbnRlcnZhbCIsInJlc2l6ZUV2ZW50IiwiaGFzT3duUHJvcGVydHkiLCJyIiwiZG90ZG90ZG90IiwiZGVzdHJveSIsIkFQSSIsImZvckVhY2giLCJjYWxsIiwib3JpZ2luYWxTdHlsZSIsImdldEF0dHJpYnV0ZSIsIm9yaWdpbmFsQ29udGVudCIsIl9nZXRPcmlnaW5hbENvbnRlbnQiLCJlbGxpcHNpcyIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJzIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInN0eWxlIiwiaGVpZ2h0IiwiX2dldE1heEhlaWdodCIsInRydW5jYXRlIiwid2F0Y2giLCJwcm90b3R5cGUiLCJyZXN0b3JlIiwidW53YXRjaCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImlubmVySFRNTCIsImFwcGVuZCIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJnZXRDbGllbnRSZWN0cyIsImxlbmd0aCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xlYXJJbnRlcnZhbCIsImNsb25lTm9kZSIsIm1heEhlaWdodCIsIl9maXRzIiwiX3RydW5jYXRlVG9Ob2RlIiwiY2FsbGJhY2siLCIkIiwiY29udGVudHMiLCJub2RlVHlwZSIsIm1hdGNoZXMiLCJjcmVhdGVDb21tZW50IiwicmVwbGFjZVdpdGgiLCJwdXNoIiwiYWZ0ZXIiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJhIiwiaCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJjIiwiY3JlYXRlRWxlbWVudCIsIm5vZGVOYW1lIiwiX3RydW5jYXRlVG9Xb3JkIiwidGV4dENvbnRlbnQiLCJpbmRleE9mIiwic3BsaXQiLCJfYWRkRWxsaXBzaXMiLCJzbGljZSIsImpvaW4iLCJfdHJ1bmNhdGVUb0xldHRlciIsInNjcm9sbEhlaWdodCIsInRvbGVyYW5jZSIsImtlZXAiLCJmaW5kIiwiYWRkIiwiY29uY2F0Iiwibm9ybWFsaXplIiwidHJpbSIsInByZXZpb3VzU2libGluZyIsIm5leHRTaWJsaW5nIiwicGFyc2VGbG9hdCIsImJveFNpemluZyIsInZlcnNpb24iLCJBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGlsZE5vZGVzIiwiZm4iLCJlYWNoIiwiWmVwdG8iLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJhQVdBLElBQUlBLFVBQVUsV0FBVyxTQUFTQyxFQUFFQyxFQUFFQyxRQUFHLElBQVNBLElBQUlBLEVBQUVGLEVBQUVHLFNBQVMsSUFBSUMsRUFBRUMsS0FBSyxJQUFJLElBQUlDLEtBQUtELEtBQUtFLFVBQVVOLEVBQUVJLEtBQUtGLFFBQVFELE1BQU1HLEtBQUtHLGFBQWEsS0FBS0gsS0FBS0ksY0FBYyxLQUFLSixLQUFLSyxZQUFZLEtBQUtWLEVBQUVHLFFBQVFILEVBQUVHLFFBQVFRLGVBQWVMLFNBQUksSUFBU0QsS0FBS0YsUUFBUUcsS0FBS0QsS0FBS0YsUUFBUUcsR0FBR04sRUFBRUcsUUFBUUcsSUFBSSxJQUFJTSxFQUFFUCxLQUFLRSxVQUFVTSxVQUFVRCxHQUFHQSxFQUFFRSxVQUFVVCxLQUFLVSxRQUFRLFdBQVcsVUFBVSxVQUFVLFFBQVEsV0FBV0MsUUFBUSxTQUFTaEIsR0FBR0ksRUFBRVcsSUFBSWYsR0FBRyxXQUFXLE9BQU9JLEVBQUVKLEdBQUdpQixLQUFLYixNQUFNQyxLQUFLRSxVQUFVTSxVQUFVUixLQUFLVSxJQUFJVixLQUFLYSxjQUFjYixLQUFLRSxVQUFVWSxhQUFhLFVBQVUsR0FBR2QsS0FBS2UsZ0JBQWdCZixLQUFLZ0Isc0JBQXNCaEIsS0FBS2lCLFNBQVNDLFNBQVNDLGVBQWVuQixLQUFLRixRQUFR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LFdBQVcsSUFBSSxhQUFhN0YsRUFBRThELEtBQUssa0JBQWtCOUQsRUFBRThELEtBQUsscUJBQXFCLElBQUksY0FBYzlELEVBQUU4RCxLQUFLLGNBQWM5RCxFQUFFOEQsS0FBSyxpQkFBaUIsSUFBSTNELEVBQUUsRUFBRUEsRUFBRUgsRUFBRTRDLE9BQU96QyxJQUFJLENBQUMsSUFBSUUsRUFBRSxPQUFPQSxFQUFFTixFQUFFQyxFQUFFRyxLQUFLNEUsT0FBTyxLQUFLOUUsR0FBRzJGLFdBQVd2RixJQUFJLE9BQU8rRCxLQUFLQyxJQUFJcEUsRUFBRSxJQUFJRixFQUFFK0YsUUFBUSxRQUFRL0YsRUFBRUcsU0FBU21CLFNBQVMsS0FBS2tDLFNBQVMsU0FBU3hELEtBQUsrQixTQUFTLE9BQU9xRCxVQUFVLEVBQUVDLEtBQUssS0FBS3JELE1BQU0sU0FBU0gsT0FBTyxNQUFNN0IsRUFBRXlELEdBQUc2QixLQUFLLFNBQVN0RixFQUFFQyxHQUFHLE9BQU9BLEVBQUVBLEdBQUdzQixTQUFTeUUsTUFBTS9ELFVBQVUrQyxNQUFNL0QsS0FBS2hCLEVBQUVnRyxpQkFBaUJqRyxLQUFLMEQsU0FBUyxTQUFTMUQsR0FBRyxPQUFPQSxFQUFFQSxHQUFHdUIsU0FBU3lFLE1BQU0vRCxVQUFVK0MsTUFBTS9ELEtBQUtqQixFQUFFa0csY0FBY2xHLEVBQXJvTCxJQUEyb0wsU0FBU0EsUUFBRyxJQUFTQSxJQUFJQSxFQUFFbUcsR0FBR3RGLFVBQVUsU0FBU2IsR0FBRyxPQUFPSyxLQUFLK0YsS0FBSyxTQUFTbkcsRUFBRUMsR0FBRyxJQUFJRSxFQUFFLElBQUlMLFVBQVVHLEVBQUVGLEdBQUdFLEVBQUVXLFVBQVVULEVBQUVXLFFBQTFILENBQW1JVyxPQUFPMkUsT0FBTzNFLE9BQU80RSIsImZpbGUiOiJkb3Rkb3Rkb3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKlx0ZG90ZG90ZG90IEpTIDQuMC45XG4gKlxuICpcdGRvdGRvdGRvdC5mcmVic2l0ZS5ubFxuICpcbiAqXHRDb3B5cmlnaHQgKGMpIEZyZWQgSGV1c3NjaGVuXG4gKlx0d3d3LmZyZWJzaXRlLm5sXG4gKlxuICpcdExpY2Vuc2U6IENDLUJZLU5DLTQuMFxuICpcdGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzQuMC9cbiAqL1xudmFyIERvdGRvdGRvdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxpKXt2b2lkIDA9PT1pJiYoaT10Lm9wdGlvbnMpO3ZhciBuPXRoaXM7Zm9yKHZhciBvIGluIHRoaXMuY29udGFpbmVyPWUsdGhpcy5vcHRpb25zPWl8fHt9LHRoaXMud2F0Y2hUaW1lb3V0PW51bGwsdGhpcy53YXRjaEludGVydmFsPW51bGwsdGhpcy5yZXNpemVFdmVudD1udWxsLHQub3B0aW9ucyl0Lm9wdGlvbnMuaGFzT3duUHJvcGVydHkobykmJnZvaWQgMD09PXRoaXMub3B0aW9uc1tvXSYmKHRoaXMub3B0aW9uc1tvXT10Lm9wdGlvbnNbb10pO3ZhciByPXRoaXMuY29udGFpbmVyLmRvdGRvdGRvdDtyJiZyLmRlc3Ryb3koKSx0aGlzLkFQST17fSxbXCJ0cnVuY2F0ZVwiLFwicmVzdG9yZVwiLFwiZGVzdHJveVwiLFwid2F0Y2hcIixcInVud2F0Y2hcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtuLkFQSVt0XT1mdW5jdGlvbigpe3JldHVybiBuW3RdLmNhbGwobil9fSksdGhpcy5jb250YWluZXIuZG90ZG90ZG90PXRoaXMuQVBJLHRoaXMub3JpZ2luYWxTdHlsZT10aGlzLmNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKXx8XCJcIix0aGlzLm9yaWdpbmFsQ29udGVudD10aGlzLl9nZXRPcmlnaW5hbENvbnRlbnQoKSx0aGlzLmVsbGlwc2lzPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMub3B0aW9ucy5lbGxpcHNpcyk7dmFyIHM9d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jb250YWluZXIpO1wiYnJlYWstd29yZFwiIT09c1tcIndvcmQtd3JhcFwiXSYmKHRoaXMuY29udGFpbmVyLnN0eWxlW1wid29yZC13cmFwXCJdPVwiYnJlYWstd29yZFwiKSxcInByZVwiPT09c1tcIndoaXRlLXNwYWNlXCJdP3RoaXMuY29udGFpbmVyLnN0eWxlW1wid2hpdGUtc3BhY2VcIl09XCJwcmUtd3JhcFwiOlwibm93cmFwXCI9PT1zW1wid2hpdGUtc3BhY2VcIl0mJih0aGlzLmNvbnRhaW5lci5zdHlsZVtcIndoaXRlLXNwYWNlXCJdPVwibm9ybWFsXCIpLG51bGw9PT10aGlzLm9wdGlvbnMuaGVpZ2h0JiYodGhpcy5vcHRpb25zLmhlaWdodD10aGlzLl9nZXRNYXhIZWlnaHQoKSksdGhpcy50cnVuY2F0ZSgpLHRoaXMub3B0aW9ucy53YXRjaCYmdGhpcy53YXRjaCgpfXJldHVybiB0LnByb3RvdHlwZS5yZXN0b3JlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnVud2F0Y2goKSx0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLHRoaXMub3JpZ2luYWxTdHlsZSksdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImRkZC10cnVuY2F0ZWRcIiksdGhpcy5jb250YWluZXIuaW5uZXJIVE1MPVwiXCIsdGhpcy5vcmlnaW5hbENvbnRlbnQuZm9yRWFjaChmdW5jdGlvbihlKXt0LmNvbnRhaW5lci5hcHBlbmQoZSl9KX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucmVzdG9yZSgpLHRoaXMuY29udGFpbmVyLmRvdGRvdGRvdD1udWxsfSx0LnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy51bndhdGNoKCk7dmFyIGU9e3dpZHRoOm51bGwsaGVpZ2h0Om51bGx9LGk9ZnVuY3Rpb24oaSxuLG8pe2lmKHQuY29udGFpbmVyLm9mZnNldFdpZHRofHx0LmNvbnRhaW5lci5vZmZzZXRIZWlnaHR8fHQuY29udGFpbmVyLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKXt2YXIgcj17d2lkdGg6aVtuXSxoZWlnaHQ6aVtvXX07cmV0dXJuIGUud2lkdGg9PXIud2lkdGgmJmUuaGVpZ2h0PT1yLmhlaWdodHx8dC50cnVuY2F0ZSgpLHJ9cmV0dXJuIGV9O1wid2luZG93XCI9PXRoaXMub3B0aW9ucy53YXRjaD8odGhpcy5yZXNpemVFdmVudD1mdW5jdGlvbihuKXt0LndhdGNoVGltZW91dCYmY2xlYXJUaW1lb3V0KHQud2F0Y2hUaW1lb3V0KSx0LndhdGNoVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZT1pKHdpbmRvdyxcImlubmVyV2lkdGhcIixcImlubmVySGVpZ2h0XCIpfSwxMDApfSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMucmVzaXplRXZlbnQpKTp0aGlzLndhdGNoSW50ZXJ2YWw9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtlPWkodC5jb250YWluZXIsXCJjbGllbnRXaWR0aFwiLFwiY2xpZW50SGVpZ2h0XCIpfSwxZTMpfSx0LnByb3RvdHlwZS51bndhdGNoPWZ1bmN0aW9uKCl7dGhpcy5yZXNpemVFdmVudCYmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5yZXNpemVFdmVudCksdGhpcy5yZXNpemVFdmVudD1udWxsKSx0aGlzLndhdGNoSW50ZXJ2YWwmJmNsZWFySW50ZXJ2YWwodGhpcy53YXRjaEludGVydmFsKSx0aGlzLndhdGNoVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMud2F0Y2hUaW1lb3V0KX0sdC5wcm90b3R5cGUudHJ1bmNhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9ITE7cmV0dXJuIHRoaXMuY29udGFpbmVyLmlubmVySFRNTD1cIlwiLHRoaXMub3JpZ2luYWxDb250ZW50LmZvckVhY2goZnVuY3Rpb24oZSl7dC5jb250YWluZXIuYXBwZW5kKGUuY2xvbmVOb2RlKCEwKSl9KSx0aGlzLm1heEhlaWdodD10aGlzLl9nZXRNYXhIZWlnaHQoKSx0aGlzLl9maXRzKCl8fChlPSEwLHRoaXMuX3RydW5jYXRlVG9Ob2RlKHRoaXMuY29udGFpbmVyKSksdGhpcy5jb250YWluZXIuY2xhc3NMaXN0W2U/XCJhZGRcIjpcInJlbW92ZVwiXShcImRkZC10cnVuY2F0ZWRcIiksdGhpcy5vcHRpb25zLmNhbGxiYWNrLmNhbGwodGhpcy5jb250YWluZXIsZSksZX0sdC5wcm90b3R5cGUuX3RydW5jYXRlVG9Ob2RlPWZ1bmN0aW9uKGUpe3ZhciBpPVtdLG49W107aWYodC4kLmNvbnRlbnRzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7aWYoMSE9dC5ub2RlVHlwZXx8IXQubWF0Y2hlcyhcIi5kZGQta2VlcFwiKSl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlQ29tbWVudChcIlwiKTt0LnJlcGxhY2VXaXRoKGUpLG4ucHVzaCh0KSxpLnB1c2goZSl9fSksbi5sZW5ndGgpe2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXtpW29dLnJlcGxhY2VXaXRoKG5bb10pO3ZhciByPXRoaXMuZWxsaXBzaXMuY2xvbmVOb2RlKCEwKTtzd2l0Y2gobltvXS5ub2RlVHlwZSl7Y2FzZSAxOm5bb10uYXBwZW5kKHIpO2JyZWFrO2Nhc2UgMzpuW29dLmFmdGVyKHIpfXZhciBzPXRoaXMuX2ZpdHMoKTtpZihyLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQociksIXMpe2lmKFwibm9kZVwiPT10aGlzLm9wdGlvbnMudHJ1bmNhdGUmJm8+MSlyZXR1cm4gdm9pZCBuW28tMl0ucmVtb3ZlKCk7YnJlYWt9fWZvcih2YXIgYT1vO2E8aS5sZW5ndGg7YSsrKWlbYV0ucmVtb3ZlKCk7dmFyIGg9bltNYXRoLm1heCgwLE1hdGgubWluKG8sbi5sZW5ndGgtMSkpXTtpZigxPT1oLm5vZGVUeXBlKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGgubm9kZU5hbWUpO2MuYXBwZW5kKHRoaXMuZWxsaXBzaXMpLGgucmVwbGFjZVdpdGgoYyksdGhpcy5fZml0cygpP2MucmVwbGFjZVdpdGgoaCk6KGMucmVtb3ZlKCksaD1uW01hdGgubWF4KDAsby0xKV0pfTE9PWgubm9kZVR5cGU/dGhpcy5fdHJ1bmNhdGVUb05vZGUoaCk6dGhpcy5fdHJ1bmNhdGVUb1dvcmQoaCl9fSx0LnByb3RvdHlwZS5fdHJ1bmNhdGVUb1dvcmQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQudGV4dENvbnRlbnQsaT0tMSE9PWUuaW5kZXhPZihcIiBcIik/XCIgXCI6XCLjgIBcIixuPWUuc3BsaXQoaSksbz1uLmxlbmd0aDtvPj0wO28tLSlpZih0LnRleHRDb250ZW50PXRoaXMuX2FkZEVsbGlwc2lzKG4uc2xpY2UoMCxvKS5qb2luKGkpKSx0aGlzLl9maXRzKCkpe1wibGV0dGVyXCI9PXRoaXMub3B0aW9ucy50cnVuY2F0ZSYmKHQudGV4dENvbnRlbnQ9bi5zbGljZSgwLG8rMSkuam9pbihpKSx0aGlzLl90cnVuY2F0ZVRvTGV0dGVyKHQpKTticmVha319LHQucHJvdG90eXBlLl90cnVuY2F0ZVRvTGV0dGVyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnRleHRDb250ZW50LnNwbGl0KFwiXCIpLGk9XCJcIixuPWUubGVuZ3RoO24+PTAmJighKGk9ZS5zbGljZSgwLG4pLmpvaW4oXCJcIikpLmxlbmd0aHx8KHQudGV4dENvbnRlbnQ9dGhpcy5fYWRkRWxsaXBzaXMoaSksIXRoaXMuX2ZpdHMoKSkpO24tLSk7fSx0LnByb3RvdHlwZS5fZml0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lci5zY3JvbGxIZWlnaHQ8PXRoaXMubWF4SGVpZ2h0K3RoaXMub3B0aW9ucy50b2xlcmFuY2V9LHQucHJvdG90eXBlLl9hZGRFbGxpcHNpcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9W1wiIFwiLFwi44CAXCIsXCIsXCIsXCI7XCIsXCIuXCIsXCIhXCIsXCI/XCJdO2UuaW5kZXhPZih0LnNsaWNlKC0xKSk+LTE7KXQ9dC5zbGljZSgwLC0xKTtyZXR1cm4gdCs9dGhpcy5lbGxpcHNpcy50ZXh0Q29udGVudH0sdC5wcm90b3R5cGUuX2dldE9yaWdpbmFsQ29udGVudD1mdW5jdGlvbigpe3ZhciBlPVwic2NyaXB0LCBzdHlsZVwiO3RoaXMub3B0aW9ucy5rZWVwJiYoZSs9XCIsIFwiK3RoaXMub3B0aW9ucy5rZWVwKSx0LiQuZmluZChlLHRoaXMuY29udGFpbmVyKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuY2xhc3NMaXN0LmFkZChcImRkZC1rZWVwXCIpfSksW3RoaXMuY29udGFpbmVyXS5jb25jYXQodC4kLmZpbmQoXCIqXCIsdGhpcy5jb250YWluZXIpKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uubm9ybWFsaXplKCksdC4kLmNvbnRlbnRzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGk9ITE7aWYoMz09dC5ub2RlVHlwZSl7aWYoXCJcIj09dC50ZXh0Q29udGVudC50cmltKCkpe3ZhciBuPXQucHJldmlvdXNTaWJsaW5nLG89dC5uZXh0U2libGluZzsodC5wYXJlbnRFbGVtZW50Lm1hdGNoZXMoXCJ0YWJsZSwgdGhlYWQsIHRib2R5LCB0Zm9vdCwgdHIsIGRsLCB1bCwgb2wsIHZpZGVvXCIpfHwhbnx8bi5tYXRjaGVzKFwiZGl2LCBwLCB0YWJsZSwgdGQsIHRkLCBkdCwgZGQsIGxpXCIpfHwhb3x8by5tYXRjaGVzKFwiZGl2LCBwLCB0YWJsZSwgdGQsIHRkLCBkdCwgZGQsIGxpXCIpKSYmKGk9ITApfX1lbHNlIDg9PXQubm9kZVR5cGUmJihpPSEwKTtpJiZlLnJlbW92ZUNoaWxkKHQpfSl9KTt2YXIgaT1bXTtyZXR1cm4gdC4kLmNvbnRlbnRzKHRoaXMuY29udGFpbmVyKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2kucHVzaCh0LmNsb25lTm9kZSghMCkpfSksaX0sdC5wcm90b3R5cGUuX2dldE1heEhlaWdodD1mdW5jdGlvbigpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuaGVpZ2h0KXJldHVybiB0aGlzLm9wdGlvbnMuaGVpZ2h0O2Zvcih2YXIgdD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRhaW5lciksZT1bXCJtYXhIZWlnaHRcIixcImhlaWdodFwiXSxpPTAsbj0wO248ZS5sZW5ndGg7bisrKXtpZihcInB4XCI9PShvPXRbZVtuXV0pLnNsaWNlKC0yKSl7aT1wYXJzZUZsb2F0KG8pO2JyZWFrfX1zd2l0Y2goZT1bXSx0LmJveFNpemluZyl7Y2FzZVwiYm9yZGVyLWJveFwiOmUucHVzaChcImJvcmRlclRvcFdpZHRoXCIpLGUucHVzaChcImJvcmRlckJvdHRvbVdpZHRoXCIpO2Nhc2VcInBhZGRpbmctYm94XCI6ZS5wdXNoKFwicGFkZGluZ1RvcFwiKSxlLnB1c2goXCJwYWRkaW5nQm90dG9tXCIpfWZvcihuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBvO1wicHhcIj09KG89dFtlW25dXSkuc2xpY2UoLTIpJiYoaS09cGFyc2VGbG9hdChvKSl9cmV0dXJuIE1hdGgubWF4KGksMCl9LHQudmVyc2lvbj1cIjQuMC45XCIsdC5vcHRpb25zPXtlbGxpcHNpczpcIuKApiBcIixjYWxsYmFjazpmdW5jdGlvbih0KXt9LHRydW5jYXRlOlwid29yZFwiLHRvbGVyYW5jZTowLGtlZXA6bnVsbCx3YXRjaDpcIndpbmRvd1wiLGhlaWdodDpudWxsfSx0LiQ9e2ZpbmQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lfHxkb2N1bWVudCxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnF1ZXJ5U2VsZWN0b3JBbGwodCkpfSxjb250ZW50czpmdW5jdGlvbih0KXtyZXR1cm4gdD10fHxkb2N1bWVudCxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LmNoaWxkTm9kZXMpfX0sdH0oKTshZnVuY3Rpb24odCl7dm9pZCAwIT09dCYmKHQuZm4uZG90ZG90ZG90PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSxpKXt2YXIgbj1uZXcgRG90ZG90ZG90KGksdCk7aS5kb3Rkb3Rkb3Q9bi5BUEl9KX0pfSh3aW5kb3cuWmVwdG98fHdpbmRvdy5qUXVlcnkpOyJdfQ==
